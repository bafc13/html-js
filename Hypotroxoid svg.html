<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <script src="https://cdn.jsdelivr.net/snap.svg/0.5.1/snap.svg-min.js"></script>
    <style>
        svg {
            width: 750px;
            height: 750px;
        }
    </style>
</head>
<body>
    <svg id="hypotrochoid" viewBox="-500 -500 500 500"></svg>

    <script>
        var s = Snap("#hypotrochoid");
        var R = 100;
        var r = 50;
        var d = 50;
        var a = 0;
        // let pathString = '';
        // let path = s.path(pathString).attr({
                    // fill: 'none',
                    // stroke: '#ff0000',
                    // strokeWidth: 2
                // });
        function updatePath() {
            var x = (R - r) * Math.cos(a) + d * Math.cos(((R-r)/r) * a);
            var y = (R - r) * Math.sin(a) - d * Math.sin(((R-r)/r) * a);

            // pathString = 'M ' + x + ' ' + y;

            // <path d=pathString
            //   style = "fill:none
            //           stroke: #ff0000
            //           strokeWidth: 2"/>

            s.path('M' + x + ' ' + y).attr({
              style = "fill: none
                      stroke: #ff0000
                      strokeWidth: 2"
            });
            // path.attr({
                // d: pathString
            // });

            a += 0.003*Math.PI;
            if (a < 360) {
                requestAnimationFrame(updatePath);
            }
        };

        requestAnimationFrame(updatePath);
    </script>
</body>
</html>
