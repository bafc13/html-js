  <!DOCTYPE html>
  <html lang="en" dir="ltr">
    <head>
      <meta charset="utf-8">
      <title></title>
    </head>
    <body>
      <canvas width="800" height="800" id="canvas" style= "border: 1px solid gray"></canvas>
      <script>
        var canvas = document.getElementById('canvas');
        var c = canvas.getContext('2d');
        // c.fillStyle = 'rgb(100,100,10)';

        function drawCircles(){
          // c.moveTo(0,0);
          c.arc(0,0,R,0,2*Math.PI, false);//main circle
          if(it > 0){
            c.moveTo(R-r,0);
            c.arc(R-r,0,r,0,2*Math.PI, false);
          }
          //inside circle
          // c.moveTo(R-r,0);
          // c.moveTo(R-r,0);
        }

        var spinAngle = 0; //angle of parameter
        var it = 0; //iterations count
        var R = 100, r = 0.65 * R, h = 35;
        c.beginPath();
        c.translate(400,400);
        drawCircles();
        c.closePath();
        c.fill();
        c.strokeStyle = '#E75480';
        c.lineWidth = 2;
        c.stroke();
        requestAnimationFrame(drawEverything);

        function drawMovingParts(spinAngle){
          // c.arc(R*Math.cos(spinAngle),R*Math.sin(spinAngle),R,0,2*Math.PI, false);
          // c.moveTo(R*Math.cos(spinAngle)-r,R*Math.sin(spinAngle));
          // c.moveTo((r*Math.cos(tempAngle)), r*Math.sin(tempAngle));
          // c.beginPath();
          //(x-(R-r)cos(spinAngle))^2+(y-(R-r)sin(spinAngle))^2=r^2
          //(rcos(spinAngle)-(R-r)cos(spinAngle))^2+(rsin(spinAngle)-(R-r)sin(spinAngle))^2=r^2
          //arg
          var argTempX = (((r*Math.cos(spinAngle) - (R-r)*Math.cos(spinAngle))**2));
          var argTempY = (((r*Math.sin(spinAngle) - (R-r)*Math.sin(spinAngle))**2));
          c.arc(argTempX, argTempY, r, 0, 2*Math.PI, false);
          // c.closePath();
        }
       function drawEverything(timestamp){
         it+=1;
         spinAngle += Math.Pi * 0.02;
         c.save();
         c.clearRect(-400,-400,1600,1600);
         var argX = ((R-r)*Math.cos(spinAngle))+(h*Math.cos(((R-r)/r)*spinAngle));
         var argY = ((R-r)*Math.sin(spinAngle))-(h*Math.sin(((R-r)/r)*spinAngle));

         c.strokeStyle = '#E75480';
         c.lineWidth = 2;
         c.stroke();
         c.beginPath();
         drawMovingParts(spinAngle);
         drawCircles();
         for(i = 0; i < it; ++i){
           var tempAngle = Math.PI * 0.02 * i;
           var tempX = ((R-r)*Math.cos(tempAngle))+(h*Math.cos(((R-r)/r)*tempAngle));
           var tempY = ((R-r)*Math.sin(tempAngle))-(h*Math.sin(((R-r)/r)*tempAngle));
           c.lineTo(tempX, -tempY);
         }
         c.moveTo(R-r,0);
         c.lineto(R-r+h,0);
         c.lineTo(argX,-argY);
         if(spinAngle >= 4*Math.PI){
           spinAngle = 0;
           tempAngle = 0;
         }
         requestAnimationFrame(drawEverything);
         c.closePath();
       }
      </script>
    </body>
  </html>
